<Application x:Class="Crystalbyte.Paranoia.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:awe="http://schemas.awesomium.com/winfx"
             xmlns:converters="clr-namespace:Crystalbyte.Paranoia.UI.Converters"
             xmlns:core="clr-namespace:Awesomium.Core;assembly=Awesomium.Core"
             xmlns:paranoia="clr-namespace:Crystalbyte.Paranoia"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             ShutdownMode="OnMainWindowClose"
             StartupUri="MainWindow.xaml">
    <!--  Default styles: http://msdn.microsoft.com/en-us/library/aa970773.aspx  -->
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Themes/Metro.ComboBox.xaml" />
                <ResourceDictionary Source="/Themes/Metro.ContextMenu.xaml" />
                <ResourceDictionary Source="/Themes/Metro.TextBlock.xaml" />
                <ResourceDictionary Source="/Themes/Metro.TextBox.xaml" />
                <ResourceDictionary Source="/Themes/Metro.RichTextBox.xaml" />
                <ResourceDictionary Source="/Themes/Metro.GridSplitter.xaml" />
                <ResourceDictionary Source="/Themes/Metro.Button.xaml" />
                <ResourceDictionary Source="/Themes/Metro.PasswordBox.xaml" />
                <ResourceDictionary Source="/Themes/Metro.RadioButton.xaml" />
                <ResourceDictionary Source="/Themes/Metro.ToggleButton.xaml" />
                <ResourceDictionary Source="/Themes/Metro.ListView.xaml" />
                <ResourceDictionary Source="/Themes/Metro.TreeView.xaml" />
                <ResourceDictionary Source="/Themes/Metro.ProgressBar.xaml" />
                <ResourceDictionary Source="/Themes/Metro.ScrollViewer.xaml" />
                <ResourceDictionary Source="/Themes/Metro.StatusBar.xaml" />
                <ResourceDictionary Source="/Themes/Metro.Slider.xaml" />
                <ResourceDictionary Source="/Themes/Metro.CheckBox.xaml" />
                <ResourceDictionary Source="/Themes/Metro.ToolTip.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <converters:SecurityToColorConverter x:Key="SecurityToColorConverter" />
            <converters:GravatarImageConverter x:Key="GravatarImageConverter" />
            <converters:MailboxLocalizer x:Key="MailboxLocalizer" />
            <converters:NullOrEmptyFormatter x:Key="NullOrEmptyFormatter" />
            <converters:MailContactFormatter x:Key="MailContactFormatter" />
            <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            <converters:CollectionCounter x:Key="CollectionCounter" />
            <converters:DateFormatter x:Key="DateFormatter" />
            <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />
            <converters:QuantityToVisibilityConverter x:Key="QuantityToVisibilityConverter" />
            <converters:PercentageFormatter x:Key="PercentageFormatter" />
            <converters:SecurityProtocolFormatter x:Key="SecurityProtocolFormatter" />
            <converters:BooleanToVisibilityMultiConverter x:Key="BooleanToVisibilityMultiConverter" />
            <converters:IconFinder x:Key="IconFinder" />

            <awe:WebSessionProvider x:Key="CompositionWebSessionProvider">
                <awe:WebSessionProvider.DataSources>
                    <paranoia:ParanoiaDataSourceProvider x:Key="paranoia" />
                </awe:WebSessionProvider.DataSources>
                <core:WebPreferences CustomCSS="{x:Static paranoia:App.CompositionCss}"
                                     DefaultEncoding="utf-8"
                                     EnableGPUAcceleration="True"
                                     Javascript="True"
                                     SmoothScrolling="True" />
            </awe:WebSessionProvider>

            <awe:WebSessionProvider x:Key="InspectionWebSessionProvider">
                <awe:WebSessionProvider.DataSources>
                    <paranoia:ParanoiaDataSourceProvider x:Key="paranoia" />
                </awe:WebSessionProvider.DataSources>
                <core:WebPreferences CustomCSS="{x:Static paranoia:App.InspectionCss}"
                                     DefaultEncoding="utf-8"
                                     EnableGPUAcceleration="True"
                                     Javascript="False"
                                     SmoothScrolling="True" />
            </awe:WebSessionProvider>

            <!--  Font Sizes  -->
            <system:Double x:Key="Metro.ShadowOpacity">0.9</system:Double>
            <system:Double x:Key="Metro.SmallFontSize">12</system:Double>
            <system:Double x:Key="Metro.NormalFontSize">14</system:Double>
            <system:Double x:Key="Metro.MediumFontSize">16</system:Double>
            <system:Double x:Key="Metro.MediumLargeFontSize">18</system:Double>
            <system:Double x:Key="Metro.LargeFontSize">22</system:Double>
            <system:Double x:Key="Metro.ExtraLargeFontSize">28</system:Double>

            <!--  Colors  -->
            <SolidColorBrush x:Key="Metro.App.AccentBrush" Color="{x:Static paranoia:MetroColors.AppAccentColor}" />
            <SolidColorBrush x:Key="Metro.App.FailureBrush" Color="{x:Static paranoia:MetroColors.AppFailureColor}" />
            <SolidColorBrush x:Key="Metro.App.SuccessBrush" Color="{x:Static paranoia:MetroColors.AppSuccessColor}" />
            <SolidColorBrush x:Key="Metro.App.WarningBrush" Color="{x:Static paranoia:MetroColors.AppWarningColor}" />
            <SolidColorBrush x:Key="Metro.Flyout.BackgroundBrush" Color="{x:Static paranoia:MetroColors.FlyoutBackgroundColor}" />
            <SolidColorBrush x:Key="Metro.Window.BackgroundBrush" Color="{x:Static paranoia:MetroColors.WindowBackgroundColor}" />
            <SolidColorBrush x:Key="Metro.Window.ShadowBrush" Color="{x:Static paranoia:MetroColors.WindowShadowColor}" />
            <SolidColorBrush x:Key="Metro.Control.BackgroundBrush" Color="{x:Static paranoia:MetroColors.ControlBackgroundColor}" />
            <SolidColorBrush x:Key="Metro.Control.SecondaryBackgroundBrush" Color="{x:Static paranoia:MetroColors.ControlSecondaryBackgroundColor}" />
            <SolidColorBrush x:Key="Metro.Control.BorderBrush" Color="{x:Static paranoia:MetroColors.ControlBorderColor}" />
            <SolidColorBrush x:Key="Metro.Control.HoverBrush" Color="{x:Static paranoia:MetroColors.ControlHoverColor}" />
            <!--  <SolidColorBrush x:Key="Metro.Control.TextBrush" Color="{x:Static paranoia:MetroColors.ControlTextColor}" />  -->
            <SolidColorBrush x:Key="Metro.Control.TextBrush" Color="WhiteSmoke" />
            <SolidColorBrush x:Key="Metro.Control.SecondaryTextBrush" Color="{x:Static paranoia:MetroColors.ControlSecondaryTextColor}" />
            <SolidColorBrush x:Key="Metro.Control.HoverTextBrush" Color="{x:Static paranoia:MetroColors.ControlHoverTextColor}" />
            <SolidColorBrush x:Key="Metro.Control.DisabledBrush" Color="{x:Static paranoia:MetroColors.ControlDisabledColor}" />
            <SolidColorBrush x:Key="Metro.Control.SelectedUnfocusedBrush" Color="{x:Static paranoia:MetroColors.ControlSelectedUnfocusedColor}" />
            <SolidColorBrush x:Key="Metro.Paper.BackgroundBrush" Color="{x:Static paranoia:MetroColors.PaperBackgroundColor}" />
            <SolidColorBrush x:Key="Metro.Paper.TextBrush" Color="{x:Static paranoia:MetroColors.PaperTextColor}" />
            <SolidColorBrush x:Key="Metro.Menu.BackgroundBrush" Color="{x:Static paranoia:MetroColors.MenuBackgroundColor}" />
            <SolidColorBrush x:Key="Metro.Scroll.Thumb.BackgroundBrush" Color="{x:Static paranoia:MetroColors.ScrollThumbBackgroundColor}" />
            <SolidColorBrush x:Key="Metro.Scroll.Thumb.HoverBrush" Color="{x:Static paranoia:MetroColors.ScrollThumbHoverColor}" />
            <SolidColorBrush x:Key="Metro.Scroll.Thumb.DragBrush" Color="{x:Static paranoia:MetroColors.ScrollThumbDragColor}" />
            <SolidColorBrush x:Key="Metro.Scroll.BackgroundBrush" Color="{x:Static paranoia:MetroColors.ScrollBackgroundColor}" />

            <DataTemplate x:Key="Metro.ThumbnailTemplate" DataType="paranoia:AttachmentContext">
                <Grid Width="120"
                      Height="80"
                      Margin="3,3,3,3"
                      Background="{DynamicResource Metro.Control.SecondaryBackgroundBrush}">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Image Grid.Row="0"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           RenderOptions.BitmapScalingMode="HighQuality"
                           Source="{Binding FullName,
                                            ConverterParameter=24,
                                            Converter={StaticResource IconFinder},
                                            IsAsync=True}"
                           Stretch="UniformToFill"
                           Visibility="{Binding IsImage,
                                                Converter={StaticResource BooleanToVisibilityConverter},
                                                ConverterParameter=!}" />
                    <Image Grid.Row="0"
                           HorizontalAlignment="Stretch"
                           VerticalAlignment="Stretch"
                           RenderOptions.BitmapScalingMode="HighQuality"
                           Source="{Binding Bytes,
                                            IsAsync=True}"
                           Stretch="Uniform"
                           Visibility="{Binding IsImage,
                                                Converter={StaticResource BooleanToVisibilityConverter}}" />
                    <Grid Grid.Row="0" VerticalAlignment="Bottom">
                        <Rectangle HorizontalAlignment="Stretch"
                                   VerticalAlignment="Stretch"
                                   Fill="{DynamicResource Metro.Window.ShadowBrush}"
                                   Opacity="{DynamicResource Metro.ShadowOpacity}" />
                        <TextBlock Margin="3"
                                   Background="Transparent"
                                   FontSize="{DynamicResource Metro.SmallFontSize}"
                                   Text="{Binding Name}"
                                   TextTrimming="CharacterEllipsis"
                                   TextWrapping="NoWrap"
                                   ToolTip="{Binding FullName}" />
                    </Grid>
                </Grid>
            </DataTemplate>
        </ResourceDictionary>
    </Application.Resources>
</Application>
