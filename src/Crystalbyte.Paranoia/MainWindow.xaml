<r:RibbonWindow x:Class="Crystalbyte.Paranoia.MainWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:contexts="clr-namespace:Crystalbyte.Paranoia.Contexts"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                xmlns:properties="clr-namespace:Crystalbyte.Paranoia.Properties"
                xmlns:r="clr-namespace:Crystalbyte.Paranoia.UI;assembly=Crystalbyte.Paranoia.Ribbon"
                xmlns:ui="clr-namespace:Crystalbyte.Paranoia.UI"
                Title="p4r4n014"
                Width="1280"
                Height="768"
                MinWidth="800"
                MinHeight="600"
                Icon="/Assets/icon.png"
                SnapsToDevicePixels="True"
                UseLayoutRounding="True"
                WindowStartupLocation="CenterScreen"
                d:DataContext="{d:DesignInstance contexts:AppContext}"
                mc:Ignorable="d">
    <r:RibbonWindow.Tabs>
        <r:RibbonTab Header="{x:Static properties:Resources.HomeTabHeader}">
            <ui:HomeRibbonPage />
        </r:RibbonTab>
        <r:RibbonTab Header="{x:Static properties:Resources.IdentitiesTabHeader}">
            <ui:HomeRibbonPage />
        </r:RibbonTab>
        <r:RibbonTab Header="{x:Static properties:Resources.ContactsTabHeader}">
            <ui:HomeRibbonPage />
        </r:RibbonTab>
        <r:RibbonTab Header="{x:Static properties:Resources.MailsTabHeader}">
            <ui:HomeRibbonPage />
        </r:RibbonTab>
    </r:RibbonWindow.Tabs>

    <!--
        <DockPanel Background="{StaticResource AppWindowBackgroundBrush}">
        <ProgressBar DockPanel.Dock="Top"
        IsIndeterminate="True"
        Visibility="{Binding IsSyncing,
        Converter={StaticResource BooleanToVisibilityConverter}}" />
        <Border Background="{StaticResource AppControlBrush}" DockPanel.Dock="Bottom">
        <Grid>
        <StackPanel Height="24"
        Margin="8,0,0,0"
        Orientation="Horizontal">
        <TextBlock VerticalAlignment="Center"
        Style="{StaticResource AppNormalTextStyle}"
        Text="Syncing ..."
        Visibility="{Binding IsSyncing,
        FallbackValue=Collapsed,
        Converter={StaticResource BooleanToVisibilityConverter}}" />
        <TextBlock VerticalAlignment="Center"
        Style="{StaticResource AppNormalTextStyle}"
        Text="Ready"
        Visibility="{Binding IsSyncing,
        ConverterParameter=!,
        FallbackValue=Visible,
        Converter={StaticResource BooleanToVisibilityConverter}}" />
        </StackPanel>
        <ResizeGrip HorizontalAlignment="Right"
        VerticalAlignment="Bottom"
        Visibility="{Binding IsNormalState,
        ElementName=Window,
        Converter={StaticResource BooleanToVisibilityConverter}}"
        WindowChrome.ResizeGripDirection="BottomRight" />
        </Grid>
        </Border>
        <Grid>
        <Border Padding="12">
        <Grid ShowGridLines="False">
        <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="220" />
        <ColumnDefinition Width="40" />
        <ColumnDefinition Width="360" />
        <ColumnDefinition Width="1" />
        <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Border Grid.Row="0"
        Grid.Column="0"
        Margin="12,0,12,0"
        BorderBrush="{StaticResource AppDarkTextBrush}"
        BorderThickness="0">
        <TextBlock Style="{StaticResource AppTitleTextStyle}" Text="{x:Static properties:Resources.ContactColumnHeaderText}" />
        </Border>
        <Border Grid.Row="1"
        Grid.Column="0"
        BorderBrush="#222"
        BorderThickness="0"
        Padding="12">
        <ItemsControl ItemsSource="{Binding ContactCommands}">
        <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
        <StackPanel Orientation="Horizontal" />
        </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
        <DataTemplate>
        <ui:AppBarButton Command="{Binding}"
        Image="{Binding Image,
        Mode=OneTime}"
        ToolTip="{Binding Tooltip,
        Mode=OneTime}" />
        </DataTemplate>
        </ItemsControl.ItemTemplate>
        </ItemsControl>
        </Border>
        <Border Grid.Row="1"
        Grid.Column="2"
        Margin="12,0,0,0"
        BorderBrush="#222"
        BorderThickness="0"
        Padding="12">
        <Grid>
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <ItemsControl Grid.Column="0" ItemsSource="{Binding MailCommands}">
        <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
        <StackPanel Orientation="Horizontal" />
        </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
        <DataTemplate>
        <ui:AppBarButton Command="{Binding}"
        Image="{Binding Image,
        Mode=OneTime}"
        ToolTip="{Binding Tooltip,
        Mode=OneTime}" />
        </DataTemplate>
        </ItemsControl.ItemTemplate>
        </ItemsControl>
        <Border Grid.Column="1" DataContext="{Binding MailboxSelectionSource}">
        <ToggleButton DataContext="{Binding Mailbox}"
        IsChecked="{Binding IsSortedAscending,
        Mode=TwoWay}"
        Style="{StaticResource SortToggleButtonStyle}" />
        </Border>
        </Grid>
        </Border>
        <Border Grid.Row="2"
        Grid.Column="0"
        DataContext="{Binding IdentitySelectionSource}">
        <ListView x:Name="ContactList"
        HorizontalAlignment="Stretch"
        Background="{StaticResource AppWindowBackgroundBrush}"
        BorderThickness="0"
        DataContext="{Binding Identity}"
        ItemsSource="{Binding Contacts}"
        ScrollViewer.VerticalScrollBarVisibility="Visible"
        SelectionChanged="OnContactSelectionChanged"
        SelectionMode="Single">
        <ListView.Resources>
        <DataTemplate DataType="{x:Type contexts:ContactMacroContext}">
        <Border Padding="12,3,12,5">
        <Grid Height="32">
        <TextBlock VerticalAlignment="Center"
        FontSize="{StaticResource AppMediumFontSize}"
        Style="{StaticResource AppLightTextStyle}"
        Text="{Binding Text,
        Mode=OneTime}" />
        </Grid>
        </Border>
        </DataTemplate>
        <DataTemplate DataType="{x:Type contexts:ContactContext}">
        <Border Padding="12,4,12,4">
        <StackPanel Orientation="Horizontal" d:DataContext="{d:DesignInstance contexts:ContactContext}">
        <Image Width="32"
        Height="32"
        Margin="0,0,6,0"
        RenderOptions.BitmapScalingMode="HighQuality"
        Source="{Binding Address,
        Converter={StaticResource MailAddressToGravatarConverter}}"
        Stretch="UniformToFill" />
        <StackPanel VerticalAlignment="Center">
        <TextBlock FontSize="{StaticResource AppMediumFontSize}"
        Style="{StaticResource AppLightTextStyle}"
        Text="{Binding Converter={StaticResource ContactToTextConverter}}" />
        <TextBlock FontSize="{StaticResource AppSmallFontSize}"
        Style="{StaticResource AppLightTextStyle}"
        Text="{Binding Address}">
        <TextBlock.Foreground>
        <Binding Mode="TwoWay" Path="IsSelected">
        <Binding.Converter>
        <converters:BooleanToBrushConverter NegativeBrush="{StaticResource AppLightControlBrush}" PositiveBrush="{StaticResource AppLightTextBrush}" />
        </Binding.Converter>
        </Binding>
        </TextBlock.Foreground>
        </TextBlock>
        </StackPanel>
        </StackPanel>
        </Border>
        </DataTemplate>
        </ListView.Resources>
        <ListView.ItemContainerStyle>
        <Style BasedOn="{StaticResource BlockListViewItem}" TargetType="ListViewItem">
        <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
        </Style>
        </ListView.ItemContainerStyle>
        </ListView>
        </Border>
        <Border Grid.Row="0"
        Grid.RowSpan="3"
        Grid.Column="1"
        BorderBrush="{StaticResource AppAccentBrush}"
        BorderThickness="0,0,1,0" />
        <Border Grid.Row="0"
        Grid.RowSpan="3"
        Grid.Column="3"
        BorderBrush="{StaticResource AppAccentBrush}"
        BorderThickness="0,0,1,0" />
        <Border Grid.Row="0"
        Grid.Column="2"
        Margin="24,0,0,0">
        <TextBlock Style="{StaticResource AppTitleTextStyle}" Text="{x:Static properties:Resources.MessagesColumnHeaderText}" />
        </Border>
        <Border Grid.Row="2"
        Grid.Column="2"
        Margin="12,0,0,0"
        DataContext="{Binding MailboxSelectionSource}">
        <ListView x:Name="MailList"
        HorizontalAlignment="Stretch"
        HorizontalContentAlignment="Stretch"
        Background="{StaticResource AppWindowBackgroundBrush}"
        BorderThickness="0"
        DataContext="{Binding Mailbox}"
        ItemsSource="{Binding MailsView}"
        ScrollViewer.VerticalScrollBarVisibility="Visible"
        SelectionChanged="OnMailSelectionChanged"
        SelectionMode="Extended">
        <ListView.ItemContainerStyle>
        <Style BasedOn="{StaticResource BlockListViewItem}" TargetType="ListViewItem">
        <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
        </Style>
        </ListView.ItemContainerStyle>
        <ListView.Resources>
        <DataTemplate DataType="{x:Type contexts:MailContext}">
        <Border Padding="12,4,12,4">
        <Grid>
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0"
        Grid.Column="0"
        MaxWidth="230"
        HorizontalAlignment="Left"
        FontSize="15"
        Style="{StaticResource AppLightTextStyle}"
        Text="{Binding Subject}"
        TextTrimming="CharacterEllipsis"
        TextWrapping="NoWrap" />
        <TextBlock Grid.Row="0"
        Grid.RowSpan="2"
        Grid.Column="1"
        HorizontalAlignment="Right"
        VerticalAlignment="Center"
        Style="{StaticResource AppNormalTextStyle}"
        Text="{Binding Date,
        Converter={StaticResource DateFormatter}}">
        <TextBlock.Foreground>
        <Binding Mode="TwoWay" Path="IsSelected">
        <Binding.Converter>
        <converters:BooleanToBrushConverter NegativeBrush="{StaticResource AppMediumTextBrush}" PositiveBrush="{StaticResource AppLightTextBrush}" />
        </Binding.Converter>
        </Binding>
        </TextBlock.Foreground>
        </TextBlock>
        <StackPanel Grid.Row="1"
        Grid.Column="0"
        Orientation="Horizontal">
        <TextBlock FontSize="12.5"
        Style="{StaticResource AppNormalTextStyle}"
        Text="{Binding FromFirst.Name}">
        <TextBlock.Foreground>
        <MultiBinding>
        <Binding Path="IsSeen" />
        <Binding Path="IsSelected" />
        <MultiBinding.Converter>
        <converters:MailSeenToBrushConverter NotSeenBrush="{StaticResource AppAccentBrush}"
        SeenBrush="{StaticResource AppMediumTextBrush}"
        SelectedBrush="{StaticResource AppLightTextBrush}" />
        </MultiBinding.Converter>
        </MultiBinding>
        </TextBlock.Foreground>
        </TextBlock>
        </StackPanel>
        </Grid>
        </Border>
        </DataTemplate>
        </ListView.Resources>
        </ListView>
        </Border>
        <Border Grid.Row="2"
        Grid.Column="1"
        DataContext="{Binding IdentitySelectionSource}">
        <ListView Background="Transparent"
        BorderThickness="0"
        DataContext="{Binding Identity}"
        ItemsSource="{Binding Mailboxes}"
        SelectionChanged="OnMailboxSelectionChanged">
        <ListView.ItemContainerStyle>
        <Style BasedOn="{StaticResource BlockListViewItem}" TargetType="ListViewItem">
        <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
        </Style>
        </ListView.ItemContainerStyle>
        <ListView.ItemTemplate>
        <DataTemplate>
        <Image Width="24">
        <Image.Source>
        <CroppedBitmap>
        <CroppedBitmap.Source>
        <Binding>
        <Binding.Converter>
        <converters:ConversionGroup>
        <converters:MailboxToImageConverter />
        <converters:CroppedBitmapConverter />
        </converters:ConversionGroup>
        </Binding.Converter>
        </Binding>
        </CroppedBitmap.Source>
        </CroppedBitmap>
        </Image.Source>
        </Image>
        </DataTemplate>
        </ListView.ItemTemplate>
        </ListView>
        </Border>
        <Border Grid.Row="0"
        Grid.RowSpan="3"
        Grid.Column="4"
        Margin="12,0,0,0"
        BorderBrush="{StaticResource AppAccentBrush}"
        DataContext="{Binding MailSelectionSource}">
        <Grid DataContext="{Binding Current}">
        <DockPanel LastChildFill="True">
        <Border BorderBrush="{StaticResource AppAccentBrush}"
        BorderThickness="0,0,0,1"
        DockPanel.Dock="Top"
        Padding="0,0,0,12">
        <Grid>
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
        </Grid.RowDefinitions>
        <Image Grid.Row="0"
        Grid.RowSpan="2"
        Width="72"
        Height="72"
        Margin="0,0,12,0"
        VerticalAlignment="Top"
        DataContext="{Binding FromFirst}"
        Source="{Binding Address,
        Converter={StaticResource MailAddressToGravatarConverter},
        IsAsync=True}" />
        <TextBlock Grid.Row="0"
        Grid.Column="1"
        Style="{StaticResource AppTitleTextStyle}"
        Text="{Binding Subject}"
        TextTrimming="CharacterEllipsis"
        TextWrapping="NoWrap" />
        </Grid>
        </Border>
        <Border Margin="0,12,0,0">
        <ui:HtmlRenderer Source="{Binding Text}" />
        </Border>
        </DockPanel>
        <Border HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch"
        Background="{StaticResource AppWindowBackgroundBrush}"
        Visibility="{Binding Converter={StaticResource NullToVisibilityConverter},
        ConverterParameter=!}">
        <TextBlock HorizontalAlignment="Center"
        VerticalAlignment="Center"
        Style="{StaticResource AppNormalTextStyle}"
        Text="{x:Static properties:Resources.NoElementsSelectedText}" />
        </Border>
        </Grid>
        </Border>
        </Grid>
        </Border>
        
        <ui:IdentityCreationFrame DataContext="{Binding IdentityCreationContext}"
        Style="{StaticResource ScreenOverlayStyle}"
        Visibility="{Binding IsActive,
        Converter={StaticResource BooleanToVisibilityConverter}}" />
        
        <ui:ContactInvitationControl DataContext="{Binding ContactInvitationContext}"
        Style="{StaticResource ScreenOverlayStyle}"
        Visibility="{Binding IsActive,
        Converter={StaticResource BooleanToVisibilityConverter}}" />
        </Grid>
        </DockPanel>
    -->
</r:RibbonWindow>