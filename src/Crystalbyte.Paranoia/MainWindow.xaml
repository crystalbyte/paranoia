<ui:MetroWindow x:Class="Crystalbyte.Paranoia.MainWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                xmlns:paranoia="clr-namespace:Crystalbyte.Paranoia"
                xmlns:ui="clr-namespace:Crystalbyte.Paranoia.UI"
                Title="p4r4n014"
                Width="1080"
                Height="668"
                MinWidth="800"
                MinHeight="600"
                Background="{StaticResource WindowBackgroundBrush}"
                Icon="/Assets/icon.png"
                RenderOptions.ClearTypeHint="Enabled"
                UseLayoutRounding="True"
                WindowStartupLocation="CenterScreen"
                d:DataContext="{d:DesignInstance paranoia:AppContext}"
                mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260" />
            <ColumnDefinition Width="40" />
            <ColumnDefinition Width="400" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid Grid.Row="0"
              Grid.Column="0"
              Grid.ColumnSpan="2"
              Margin="16,10,16,0"
              DataContext="{Binding SelectedAccount,
                                    RelativeSource={RelativeSource FindAncestor,
                                                                   AncestorType=ui:MetroWindow}}"
              d:DataContext="{d:DesignInstance paranoia:MailAccountContext}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Image Grid.Row="0"
                   Grid.Column="0"
                   Width="56"
                   Margin="0,0,16,16"
                   HorizontalAlignment="Left"
                   Source="{Binding Address,
                                    Converter={StaticResource GravatarImageConverter}}" />
            <StackPanel Grid.Column="1"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top">
                <TextBlock Style="{StaticResource AppTitleTextStyle}" Text="{Binding Name}" />
                <TextBlock Style="{StaticResource AppSubtitleTextStyle}" Text="{Binding Address}" />
            </StackPanel>

        </Grid>
        <Grid Grid.Row="1"
              Grid.Column="0"
              Background="#333"
              DataContext="{Binding SelectedAccount,
                                    RelativeSource={RelativeSource FindAncestor,
                                                                   AncestorType=ui:MetroWindow}}"
              d:DataContext="{d:DesignInstance paranoia:MailAccountContext}">
            <ListView Background="{StaticResource WindowBackgroundBrush}"
                      BorderThickness="0"
                      ItemsSource="{Binding Contacts}"
                      SelectionChanged="OnContactsSelectionChanged">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Image Grid.Row="0"
                                   Grid.Column="0"
                                   Width="42"
                                   Margin="12,0,12,0"
                                   HorizontalAlignment="Left"
                                   Source="{Binding Address,
                                                    Converter={StaticResource GravatarImageConverter}}" />
                            <StackPanel Grid.Column="1" VerticalAlignment="Top">
                                <TextBlock Style="{StaticResource AppTitleTextStyle}" Text="{Binding Name}" />
                                <TextBlock Style="{StaticResource AppSubtitleTextStyle}" Text="{Binding Address}" />
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
        <Grid Grid.Row="1" Grid.Column="1">
            <ListView BorderThickness="0" ItemsSource="{Binding Contacts}">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Image Grid.Row="0"
                                   Grid.Column="0"
                                   Width="42"
                                   Margin="12,0,12,0"
                                   HorizontalAlignment="Left"
                                   Source="{Binding Address,
                                                    Converter={StaticResource GravatarImageConverter}}" />
                            <StackPanel Grid.Column="1"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Top">
                                <TextBlock FontSize="16"
                                           Style="{StaticResource AppTitleTextStyle}"
                                           Text="{Binding Name}" />
                                <TextBlock FontSize="{StaticResource AppSmallFontSize}"
                                           Style="{StaticResource AppSubtitleTextStyle}"
                                           Text="{Binding Address}" />
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>

    </Grid>
</ui:MetroWindow>