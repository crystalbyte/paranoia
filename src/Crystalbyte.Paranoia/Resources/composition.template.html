<!DOCTYPE html>
<html>
<head>
    <title>Composition</title>
    <meta charset="utf-8" />
    <link href="resource:///composition.template.less" type="text/css" rel="stylesheet">
    <style>
        #editor-container {
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            background: white;
        }
    </style>
</head>
    <body>
        <div id="editor-container"></div>
        <script type="text/javascript" src="resource:///jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="resource:///lodash-3.2.0.min.js"></script>
        <script type="text/javascript" src="resource:///quill.js"></script>
        <!-- ReSharper disable UseOfImplicitGlobalInFunctionScope -->
        <script type="text/javascript">
            
            $(window).resize(function () {
                var editor = $("#editor-container");
                editor.css("width", "100%");
                editor.css("height", "100%");
            });

            var quill = new Quill('#editor-container', {
                'styles': {
                    '.ql-editor': {
                        'font-family': "'Trebuchet MS', sans-serif",
                        'font-size': '16px',
                    }
                }
            });

            quill.on("text-change", function (delta, source) {
                // Extern is defined outside this document ...        
                var json = JSON.stringify(delta);
                extern.notifyTextChanged(source, json);
            });

            quill.on("selection-change", function (range) {
                // Extern is defined outside this document ...        
                var json = JSON.stringify(range);
                extern.notifySelectionChanged(json);
            });

        </script>
        <!-- ReSharper restore UseOfImplicitGlobalInFunctionScope -->
    </body>
</html>
